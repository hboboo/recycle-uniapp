import{x as e,b as a,o as l,c as t,w as s,d as i,g as d,i as o,j as c,e as n,F as u,f as r,m,t as f,q as p,a as _,r as h,n as v,k,I as b,h as y}from"./index-rl035M-e.js";import{_ as w}from"./popup.CRTDtx4v.js";import{r as g,o as x}from"./uni-app.es.DsLUWPXy.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as V}from"./add-address.MbQxfMwi.js";import{_ as D}from"./dui-toast.YDrafLDH.js";const P=C({__name:"service-city",props:{modelValue:Boolean},emits:["close","update:modelValue"],setup(n,{emit:u}){const r=u,m=n,f=e({get:()=>m.modelValue,set(){r("update:modelValue",!1)}});function p(){m.clickModalClose&&(r("close"),f.value=!1)}return(e,n)=>{const u=o,r=c,m=g(a("popup"),w);return l(),t(m,{modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=e=>f.value=e),clickModalClose:!0,onClose:p},{default:s((()=>[i(u,{class:"service-city-wrapper"},{default:s((()=>[i(u,{class:"title title-decoration"},{default:s((()=>[d(" 上门城市 ")])),_:1}),i(u,{class:"city-block"},{default:s((()=>[i(u,null,{default:s((()=>[i(r,{class:"pro"},{default:s((()=>[d("北京：")])),_:1}),i(r,{class:"city"},{default:s((()=>[d("北京")])),_:1})])),_:1}),i(u,null,{default:s((()=>[i(r,{class:"pro"},{default:s((()=>[d("上海：")])),_:1}),i(r,{class:"city"},{default:s((()=>[d("上海")])),_:1})])),_:1}),i(u,null,{default:s((()=>[i(r,{class:"pro"},{default:s((()=>[d("广东：")])),_:1}),i(r,{class:"city"},{default:s((()=>[d("广州、深圳、佛山")])),_:1})])),_:1}),i(u,null,{default:s((()=>[i(r,{class:"pro"},{default:s((()=>[d("江西：")])),_:1}),i(r,{class:"city"},{default:s((()=>[d("南昌、九江、吉安")])),_:1})])),_:1}),i(u,null,{default:s((()=>[i(r,{class:"pro"},{default:s((()=>[d("广西：")])),_:1}),i(r,{class:"city"},{default:s((()=>[d("南宁、桂林")])),_:1})])),_:1}),i(u,null,{default:s((()=>[i(r,{class:"pro"},{default:s((()=>[d("湖南：")])),_:1}),i(r,{class:"city"},{default:s((()=>[d("长沙、株洲")])),_:1})])),_:1}),i(u,null,{default:s((()=>[i(r,{class:"pro"},{default:s((()=>[d("福建：")])),_:1}),i(r,{class:"city"},{default:s((()=>[d("福州、泉州、厦门")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-84f44600"]]);const A=C({emits:["close","update:modelValue","confirm","input"],data:()=>({dateActiveIndex:0,dateList:[],timePeriodActiveIndex:-1,timePeriodList:[{disabled:!1,time_period:"9:00-11:00"},{disabled:!1,time_period:"11:00-13:00"},{disabled:!1,time_period:"13:00-15:00"},{disabled:!1,time_period:"15:00-17:00"},{disabled:!1,time_period:"17:00-19:00"},{disabled:!1,time_period:"19:00-21:00"}]}),props:{dateRange:{type:Number,default:7},timePeriodData:Array,clickModalClose:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},modelValue:Boolean},computed:{visible(){return this.modelValue}},created(){this.init()},methods:{init(){const e=new Date,a=[];for(var l=0;l<this.dateRange;l++)a.push(this.getDateObjec(this.getNextSomeDay(e,l)));this.dateList=a,this.getTimePeriodList()},getNextSomeDay(e,a){const l=new Date(e);return l.setDate(l.getDate()+a),l},getDateObjec(e){const a=e?new Date(e):new Date,l=a.getFullYear(),t=a.getMonth()+1,s=a.getDate(),i=a.getDay(),d=a.getHours();return{date_str:`${this.fillZero(t)}-${this.fillZero(s)}`,date:s,hour:d,year:l,week_str:"周"+this.getWeekStr(i)}},getTimePeriodList(){const e=JSON.parse(JSON.stringify(this.isArray(this.timePeriodData)&&this.timePeriodData.length?this.timePeriodData:this.timePeriodList)),a=this.dateList[this.dateActiveIndex],l=this.getDateObjec();a&&a.date==l.date?e.forEach((e=>{const t=this.isArray(e.disabled_date)?e.disabled_date:[],s=e.time_period,i=l.hour;s.split("-")[0];parseFloat(s.split("-")[1])<=i&&(e.disabled=!0),e.disabled_appoint=!(!t.length||!t.includes(a.date_str))})):e.forEach((e=>{const l=this.isArray(e.disabled_date)?e.disabled_date:[];e.disabled=!1,e.disabled_appoint=!(!l.length||!l.includes(a.date_str))})),this.timePeriodList=e},fillZero:e=>e<10?"0"+e:e,getWeekStr(e){let a="";switch(e){case 0:a="日";break;case 1:a="一";break;case 2:a="二";break;case 3:a="三";break;case 4:a="四";break;case 5:a="五";break;case 6:a="六"}return a},chooseDate(e){this.dateActiveIndex=e,this.timePeriodActiveIndex=-1,this.getTimePeriodList()},chooseTimePeriod(e,a){e.disabled||e.disabled_appoint||(this.timePeriodActiveIndex=a)},modelCallBack(){this.$emit("update:modelValue",!1)},close(){this.$emit("close"),this.modelCallBack()},isArray:e=>"[object Array]"===Object.prototype.toString.call(e),confirm(){var e;const a=this.dateList[this.dateActiveIndex],l=null==(e=this.timePeriodList[this.timePeriodActiveIndex])?void 0:e.time_period;this.$emit("confirm",{date:`${a.year}-${a.date_str}`,week_str:a.week_str,time_period:l}),this.modelCallBack()}}},[["render",function(e,a,_,h,v,k){const b=o,y=c;return k.visible?(l(),t(b,{key:0,class:"dui-appoint-date"},{default:s((()=>[i(b,{class:"dui-mask",onClick:k.close},null,8,["onClick"]),i(b,{class:"dui-content"},{default:s((()=>[i(b,{class:"dui-title"},{default:s((()=>[i(y,{class:""},{default:s((()=>[d("选择预约日期")])),_:1}),i(y,{class:"dui-cancel-btn",onClick:k.close},{default:s((()=>[d("取消")])),_:1},8,["onClick"])])),_:1}),i(b,{class:"dui-date"},{default:s((()=>[(l(!0),n(u,null,r(v.dateList,((e,a)=>(l(),t(b,{class:m(["dui-date-item",{active:v.dateActiveIndex==a}]),key:a,onClick:e=>k.chooseDate(a)},{default:s((()=>[i(b,{class:"dui-date-str"},{default:s((()=>[d(f(e.date_str),1)])),_:2},1024),i(b,null,{default:s((()=>[d(f(e.week_str),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1}),i(b,{class:"dui-title"},{default:s((()=>[d("选择预约时间段")])),_:1}),i(b,{class:"dui-time-period"},{default:s((()=>[(l(!0),n(u,null,r(v.timePeriodList,((e,a)=>(l(),t(b,{class:m(["dui-time-period-item",{active:v.timePeriodActiveIndex==a,disabled:e.disabled||e.disabled_appoint}]),key:a,onClick:l=>k.chooseTimePeriod(e,a)},{default:s((()=>[d(f(e.time_period)+" ",1),e.disabled_appoint?(l(),t(b,{key:0,class:"dui-disabled-appoint-text"},{default:s((()=>[d(f(e.disabled_text),1)])),_:2},1024)):p("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1}),i(b,{class:"dui-btn",onClick:k.confirm},{default:s((()=>[d("确认")])),_:1},8,["onClick"])])),_:1})])),_:1})):p("",!0)}],["__scopeId","data-v-b9467ad2"]]),I=C({__name:"appoint-notice",props:{modelValue:Boolean},emits:["close","update:modelValue"],setup(c,{emit:n}){const u=n,r=c,m=e({get:()=>r.modelValue,set(){u("update:modelValue",!1)}});function f(){r.clickModalClose&&(u("close"),m.value=!1)}return(e,c)=>{const n=o,u=g(a("popup"),w);return l(),t(u,{modelValue:m.value,"onUpdate:modelValue":c[0]||(c[0]=e=>m.value=e),clickModalClose:!0,onClose:f},{default:s((()=>[i(n,{class:"appoint-notice-wrapper"},{default:s((()=>[i(n,{class:"title title-decoration"},{default:s((()=>[d("预约须知")])),_:1}),i(n,{class:"content"},{default:s((()=>[i(n,{class:"block"},{default:s((()=>[d("1、部分城市开通上门回收，未开通城市则无法上门，部分城市开通上门回收，未开通城市则无法上门。")])),_:1}),i(n,{class:"block"},{default:s((()=>[d("2、部分城市开通上门回收，未开通城市则无法上门，部分城市开通上门回收，未开通城市则无法上门。")])),_:1}),i(n,{class:"block"},{default:s((()=>[d("3、部分城市开通上门回收，未开通城市则无法上门，部分城市开通上门回收，未开通城市则无法上门。")])),_:1}),i(n,{class:"block"},{default:s((()=>[d("4、部分城市开通上门回收，未开通城市则无法上门，部分城市开通上门回收，未开通城市则无法上门。")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-dd15e29b"]]),L=C({__name:"index",setup(w){const C=_(!1),L=_(!1),$=_(!1),j=_(null),T=_(!1),B=e=>{const{date:a,time_period:l}=e;M.time=`${a} ${l}`},S=()=>{L.value=!0},U=e=>{const{name:a,phone:l,area:t,address_detail:s}=e;M.address=`${a} ${l} ${t} ${s}`},M=h({type:"clothes",address:"",time:"",weight:"",reward:"",phone_model:""}),O=_(0),N=_(-1),F=_(-1),Z=e((()=>{let e=[];switch(M.type){case"clothes":e=E;break;case"books":e=J;break;case"home-appliances":e=R;break;case"phone":e=W}return e})),E=h([{id:"1",weight:"3-10kg",describe:"约20件"},{id:"2",weight:"10-20kg",describe:"约40件"},{id:"3",weight:"20-50kg",describe:"约60件"},{id:"4",weight:"50kg以上",describe:"约150件"}]),J=h([{id:1,weight:"5-10本"},{id:2,weight:"10-20本"},{id:3,weight:"20本以上"}]),R=h([{id:1,name:"洗衣机"},{id:2,name:"冰箱"},{id:3,name:"空调"},{id:4,name:"电视"},{id:5,name:"热水器"},{id:6,name:"电饭锅"},{id:7,name:"电磁炉"},{id:999,name:"其他"}]),W=h([{id:1,name:"华为"},{id:2,name:"小米"},{id:3,name:"魅族"},{id:4,name:"oppo"},{id:5,name:"vivo"},{id:6,name:"苹果"},{id:7,name:"三星"},{id:999,name:"其他"}]),q=_([{id:"1",type:"beans",title:"回收豆-1kg旧衣=80回收豆",describe:"回收豆可在“福利”专区兑换物品",num:"100w"},{id:"2",type:"cash",title:"现金奖励-1kg旧衣=0.8元",describe:"按实际回收重量发放，需自行提现",num:"200w"}]),H=_([{id:101,nickname:"风过无痕",avatar:"/static/icon/avatar.png",time:"2025-03-10 09:30",comment:"服务态度超好，回收效率高，太满意了！"},{id:102,nickname:"云淡天高",avatar:"/static/icon/avatar.png",time:"2025-03-10 14:15",comment:"方便快捷，价格也合理，强烈推荐！"},{id:103,nickname:"夜雨微凉",avatar:"/static/icon/avatar.png",time:"2025-03-10 18:45",comment:"上门服务太赞了，省时省力，必须五星好评！"}]),Y=()=>{v({url:"/pages/user/online-service/online-service"})},z=()=>{var e,a;if(M.weight=null==(e=Z.value[O.value])?void 0:e.id,M.reward=null==(a=q.value[N.value])?void 0:a.id,M.address)if(M.time){if(!M.weight){let e="";return e="phone"==M.type?"请选择手机品牌！":"home-appliances"==M.type?"请选择家电类型！":"请选择预估重量！",void j.value.showToast(e)}M.reward?j.value.showToast("模拟提交成功！"):j.value.showToast("请选择奖励！")}else j.value.showToast("请选择预约上门时间！");else j.value.showToast("请填写地址！")};return x((e=>{M.type=e.type})),(e,_)=>{const h=o,v=c,w=k,x=b,E=y,J=g(a("service-city"),P),R=g(a("add-address"),V),W=g(a("dui-appoint-date"),A),G=g(a("appoint-notice"),I),K=g(a("dui-toast"),D);return l(),t(h,{class:"order-wrapper"},{default:s((()=>[i(h,{class:"order-banner"}),i(h,{class:"main"},{default:s((()=>[i(h,{class:"form"},{default:s((()=>[i(h,{class:"top flex-center-between"},{default:s((()=>[i(v,{class:"title"},{default:s((()=>[d("上门取件回收")])),_:1}),i(v,{class:"city",onClick:_[0]||(_[0]=e=>C.value=!0)},{default:s((()=>[d("上门城市?")])),_:1})])),_:1}),i(h,{class:"form-item flex"},{default:s((()=>[i(h,{class:"form-label flex-center"},{default:s((()=>[i(w,{class:"address-icon icon"}),i(v,{class:"name"},{default:s((()=>[d("取件地址")])),_:1})])),_:1}),i(h,{class:"form-content flex-center-between",onClick:S},{default:s((()=>[i(v,{class:"flex-1"},{default:s((()=>[d(f(M.address||"请填写地址"),1)])),_:1}),i(w,{class:"icon"})])),_:1})])),_:1}),i(h,{class:"form-item flex-center"},{default:s((()=>[i(h,{class:"form-label flex-center"},{default:s((()=>[i(w,{class:"time-icon icon"}),i(v,{class:"name"},{default:s((()=>[d("上门时间")])),_:1})])),_:1}),i(h,{class:"form-content flex-center-between",onClick:_[1]||(_[1]=e=>T.value=!0)},{default:s((()=>[i(v,null,{default:s((()=>[d(f(M.time||"预约上门时间"),1)])),_:1}),i(w,{class:"icon"})])),_:1})])),_:1}),"clothes"==M.type||"books"==M.type?(l(),t(h,{key:0,class:"form-item"},{default:s((()=>[i(h,{class:"form-label flex-center"},{default:s((()=>[i(w,{class:"weight-icon icon"}),i(v,{class:"name"},{default:s((()=>[d("预估重量")])),_:1})])),_:1}),i(h,{class:"weight-select flex-center-between"},{default:s((()=>[(l(!0),n(u,null,r(Z.value,((e,a)=>(l(),t(h,{class:m(["weight-item flex-center-center flex-column",{active:O.value==a,books:"books"==M.type}]),key:e.id,onClick:e=>O.value=a},{default:s((()=>[i(v,null,{default:s((()=>[d(f(e.weight),1)])),_:2},1024),i(v,{class:"describe"},{default:s((()=>[d(f(e.describe),1)])),_:2},1024),O.value==a?(l(),t(w,{key:0,class:"correct-icon"})):p("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})):p("",!0),"home-appliances"==M.type?(l(),t(h,{key:1,class:"form-item"},{default:s((()=>[i(h,{class:"form-label flex-center"},{default:s((()=>[i(w,{class:"home-appliances-icon icon"}),i(v,{class:"name"},{default:s((()=>[d("家电类型")])),_:1})])),_:1}),i(h,{class:"home-appliances-select flex-center-between flex-wrap"},{default:s((()=>[(l(!0),n(u,null,r(Z.value,((e,a)=>(l(),t(h,{class:m(["home-appliances-item flex-center-center",{active:F.value==a}]),key:e.id,onClick:e=>F.value=a},{default:s((()=>[i(v,null,{default:s((()=>[d(f(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})):p("",!0),"phone"==M.type?(l(),t(h,{key:2,class:"form-item"},{default:s((()=>[i(h,{class:"form-label flex-center"},{default:s((()=>[i(w,{class:"phone-brand-icon icon"}),i(v,{class:"name"},{default:s((()=>[d("手机品牌")])),_:1})])),_:1}),i(h,{class:"phone-brand-select flex-center-between flex-wrap"},{default:s((()=>[(l(!0),n(u,null,r(Z.value,((e,a)=>(l(),t(h,{class:m(["phone-brand-item flex-center-center",{active:F.value==a}]),key:e.id,onClick:e=>F.value=a},{default:s((()=>[i(v,null,{default:s((()=>[d(f(e.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1}),-1!=F.value?(l(),t(h,{key:0,class:"phone-model"},{default:s((()=>[i(x,{modelValue:M.phone_model,"onUpdate:modelValue":_[2]||(_[2]=e=>M.phone_model=e),class:"input","placeholder-class":"placeholder",placeholder:"请输入手机型号",type:"text"},null,8,["modelValue"])])),_:1})):p("",!0)])),_:1})):p("",!0),i(h,{class:"form-item"},{default:s((()=>[i(h,{class:"form-label flex-center"},{default:s((()=>[i(w,{class:"reward-icon icon"}),i(v,{class:"name"},{default:s((()=>[d("奖励选择")])),_:1})])),_:1}),i(h,{class:"reward-select"},{default:s((()=>[(l(!0),n(u,null,r(q.value,((e,a)=>(l(),t(h,{class:m(["reward-item",{active:N.value==a}]),key:e.id,onClick:e=>N.value=a},{default:s((()=>[i(h,{class:"title flex-center"},{default:s((()=>[i(v,null,{default:s((()=>[d(f(e.title),1)])),_:2},1024),i(w,{class:m(["reward-type-icon",[e.type]])},null,8,["class"])])),_:2},1024),i(h,{class:"describe"},{default:s((()=>[d(f(e.describe),1)])),_:2},1024),i(h,{class:"num"},{default:s((()=>[d(f(e.num)+"人已选",1)])),_:2},1024),N.value==a?(l(),t(w,{key:0,class:"correct-icon"})):p("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1}),i(h,{class:"notice-box flex-center-between"},{default:s((()=>[i(h,{class:"notice",onClick:_[3]||(_[3]=e=>$.value=!0)}),i(h,{class:"service",onClick:Y})])),_:1}),i(h,{class:"comment"},{default:s((()=>[i(h,{class:"title title-decoration-s"},{default:s((()=>[d("用户评价")])),_:1}),(l(!0),n(u,null,r(H.value,(e=>(l(),t(h,{class:"comment-item",key:e.id},{default:s((()=>[i(h,{class:"user-info flex"},{default:s((()=>[i(h,{class:"avatar"},{default:s((()=>[i(E,{class:"image",src:e.avatar,mode:"aspectFit"},null,8,["src"])])),_:2},1024),i(h,{class:"info"},{default:s((()=>[i(h,{class:"nickname"},{default:s((()=>[d(f(e.nickname),1)])),_:2},1024),i(h,{class:"time"},{default:s((()=>[d(f(e.time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(h,{class:"comment-content"},{default:s((()=>[d(f(e.comment),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),i(h,{class:"submit flex-center-center",onClick:z},{default:s((()=>[d("确认预约")])),_:1}),i(J,{modelValue:C.value,"onUpdate:modelValue":_[4]||(_[4]=e=>C.value=e)},null,8,["modelValue"]),i(R,{modelValue:L.value,"onUpdate:modelValue":_[5]||(_[5]=e=>L.value=e),showClose:!1,onConfirm:U},null,8,["modelValue"]),i(W,{modelValue:T.value,"onUpdate:modelValue":_[6]||(_[6]=e=>T.value=e),onConfirm:B},null,8,["modelValue"]),i(G,{modelValue:$.value,"onUpdate:modelValue":_[7]||(_[7]=e=>$.value=e)},null,8,["modelValue"]),i(K,{ref_key:"toast",ref:j},null,512)])),_:1})])),_:1})}}},[["__scopeId","data-v-7732a23f"]]);export{L as default};
