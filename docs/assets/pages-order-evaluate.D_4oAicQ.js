import{H as e,b as t,o as a,c as s,w as l,d as o,e as i,F as n,f as r,m as u,p as c,J as d,i as m,a as h,r as f,g as _,t as v,u as p,j as g,k as y,O as b}from"./index-rl035M-e.js";import{_ as S}from"./uni-icons.BJNxUT0D.js";import{r as x,o as C}from"./uni-app.es.DsLUWPXy.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as M}from"./dui-toast.YDrafLDH.js";import{s as N}from"./switch.DckV4636.js";const R=w({name:"UniRate",props:{isFill:{type:[Boolean,String],default:!0},color:{type:String,default:"#ececec"},activeColor:{type:String,default:"#ffca3e"},disabledColor:{type:String,default:"#c0c0c0"},size:{type:[Number,String],default:24},value:{type:[Number,String],default:0},modelValue:{type:[Number,String],default:0},max:{type:[Number,String],default:5},margin:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},readonly:{type:[Boolean,String],default:!1},allowHalf:{type:[Boolean,String],default:!1},touchable:{type:[Boolean,String],default:!0}},data:()=>({valueSync:"",userMouseFristMove:!0,userRated:!1,userLastRate:1}),watch:{value(e){this.valueSync=Number(e)},modelValue(e){this.valueSync=Number(e)}},computed:{stars(){const e=this.valueSync?this.valueSync:0,t=[],a=Math.floor(e),s=Math.ceil(e);for(let l=0;l<this.max;l++)a>l?t.push({activeWitch:"100%"}):s-1===l?t.push({activeWitch:100*(e-a)+"%"}):t.push({activeWitch:"0"});return t},marginNumber(){return Number(this.margin)}},created(){this.valueSync=Number(this.value||this.modelValue),this._rateBoxLeft=0,this._oldValue=null},mounted(){setTimeout((()=>{this._getSize()}),100),this.PC=this.IsPC()},methods:{touchstart(e){if(this.IsPC())return;if(this.readonly||this.disabled)return;const{clientX:t,screenX:a}=e.changedTouches[0];this._getRateCount(t||a)},touchmove(e){if(this.IsPC())return;if(this.readonly||this.disabled||!this.touchable)return;const{clientX:t,screenX:a}=e.changedTouches[0];this._getRateCount(t||a)},mousedown(e){if(!this.IsPC())return;if(this.readonly||this.disabled)return;const{clientX:t}=e;this.userLastRate=this.valueSync,this._getRateCount(t),this.userRated=!0},mousemove(e){if(!this.IsPC())return;if(this.userRated)return;if(this.userMouseFristMove&&(console.log("---mousemove----",this.valueSync),this.userLastRate=this.valueSync,this.userMouseFristMove=!1),this.readonly||this.disabled||!this.touchable)return;const{clientX:t}=e;this._getRateCount(t)},mouseleave(e){this.IsPC()&&(this.readonly||this.disabled||!this.touchable||(this.userRated?this.userRated=!1:this.valueSync=this.userLastRate))},IsPC(){var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],a=!0;for(let s=0;s<t.length-1;s++)if(e.indexOf(t[s])>0){a=!1;break}return a},_getRateCount(e){this._getSize();const t=Number(this.size);if(isNaN(t))return new Error("size 属性只能设置为数字");const a=e-this._rateBoxLeft;let s=parseInt(a/(t+this.marginNumber));s=s<0?0:s,s=s>this.max?this.max:s;const l=parseInt(a-(t+this.marginNumber)*s);let o=0;(this._oldValue!==s||this.PC)&&(this._oldValue=s,o=this.allowHalf?l>t/2?s+1:s+.5:s+1,o=Math.max(.5,Math.min(o,this.max)),this.valueSync=o,this._onChange())},_onChange(){this.$emit("input",this.valueSync),this.$emit("update:modelValue",this.valueSync),this.$emit("change",{value:this.valueSync})},_getSize(){e().in(this).select(".uni-rate").boundingClientRect().exec((e=>{e&&(this._rateBoxLeft=e[0].left)}))}}},[["render",function(e,h,f,_,v,p){const g=x(t("uni-icons"),S),y=m;return a(),s(y,null,{default:l((()=>[o(y,{ref:"uni-rate",class:"uni-rate"},{default:l((()=>[(a(!0),i(n,null,r(p.stars,((e,t)=>(a(),s(y,{class:u(["uni-rate__icon",{"uni-cursor-not-allowed":f.disabled}]),style:c({"margin-right":p.marginNumber+"px"}),key:t,onTouchstart:d(p.touchstart,["stop"]),onTouchmove:d(p.touchmove,["stop"]),onMousedown:d(p.mousedown,["stop"]),onMousemove:d(p.mousemove,["stop"]),onMouseleave:p.mouseleave},{default:l((()=>[o(g,{color:f.color,size:f.size,type:f.isFill?"star-filled":"star"},null,8,["color","size","type"]),o(y,{style:c({width:e.activeWitch}),class:"uni-rate__icon-on"},{default:l((()=>[o(g,{color:f.disabled?f.disabledColor:f.activeColor,size:f.size,type:"star-filled"},null,8,["color","size"])])),_:2},1032,["style"])])),_:2},1032,["class","style","onTouchstart","onTouchmove","onMousedown","onMousemove","onMouseleave"])))),128))])),_:1},512)])),_:1})}],["__scopeId","data-v-6a42bbe2"]]),P=w({__name:"evaluate",setup(e){const c=h(null);let d=h(0),S=h({order_time:"2024-12-25 12:00",recycle_worker:"李师傅",recycle_type:"books",weight:"5-10本",real_weight:"5本"}),w=h([{id:1,name:"上门速度快"},{id:2,name:"服务态度好"},{id:3,name:"礼貌热情"},{id:4,name:"风雨无阻"},{id:5,name:"超给力"},{id:6,name:"平台超棒"},{id:6,name:"下次再来"}]);const P=f({comment:"",tag:[],rate:5}),V=()=>{console.log("form.comment:",P.comment);if(!{...P}.comment)return c.value.showToast("请输入您对本次服务的评价！");c.value.showToast("提交成功！")};return C((e=>{d.value=e.order_id,console.log(e)})),(e,d)=>{const h=g,f=m,C=y,z=b,k=x(t("uni-rate"),R),I=x(t("dui-toast"),M);return a(),s(f,{class:"evaluate-wrapper"},{default:l((()=>[o(f,{class:"main"},{default:l((()=>[o(f,{class:"order-info"},{default:l((()=>[o(f,{class:"order-info-item flex-center"},{default:l((()=>[o(h,{class:"name"},{default:l((()=>[_("回收类型：")])),_:1}),o(h,{class:"val"},{default:l((()=>[_(v(p(N)(p(S).recycle_type)),1)])),_:1})])),_:1}),o(f,{class:"order-info-item flex-center"},{default:l((()=>[o(h,{class:"name"},{default:l((()=>[_("回收重量：")])),_:1}),o(h,{class:"val"},{default:l((()=>[_(v(p(S).real_weight),1)])),_:1})])),_:1}),o(f,{class:"order-info-item flex-center"},{default:l((()=>[o(h,{class:"name"},{default:l((()=>[_("下单时间：")])),_:1}),o(h,{class:"val"},{default:l((()=>[_(v(p(S).order_time),1)])),_:1})])),_:1})])),_:1}),o(f,{class:"comment-box"},{default:l((()=>[o(f,{class:"flex-center"},{default:l((()=>[o(h,null,{default:l((()=>[_("您对本次服务评价")])),_:1}),o(C,{class:"comment-icon"})])),_:1}),o(z,{class:"textarea",modelValue:P.comment,"onUpdate:modelValue":d[0]||(d[0]=e=>P.comment=e),placeholder:"请输入您对本次服务的评价","placeholder-class":"placeholder"},null,8,["modelValue"]),o(f,{class:"comment-tag"},{default:l((()=>[(a(!0),i(n,null,r(p(w),((e,t)=>(a(),s(f,{class:u(["comment-tag-item",{active:e.actived}]),key:t,onClick:t=>(e=>{e.actived=!e.actived})(e)},{default:l((()=>[_(v(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),o(f,{class:"flex-center"},{default:l((()=>[o(h,null,{default:l((()=>[_("满意评分  ")])),_:1}),o(k,{max:5,modelValue:P.rate,"onUpdate:modelValue":d[1]||(d[1]=e=>P.rate=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o(f,{class:"submit-btn flex-center-center",onClick:V},{default:l((()=>[_("提交")])),_:1}),o(I,{ref_key:"toast",ref:c},null,512)])),_:1})}}},[["__scopeId","data-v-d289f6d2"]]);export{P as default};
